# 152-FZ Data Anonymization MCP Server

MCP —Å–µ—Ä–≤–µ—Ä –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –æ–±–µ–∑–ª–∏—á–∏–≤–∞–Ω–∏—è –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–∏ —Å —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º–∏ 152-–§–ó –†–§. –ò—Å–ø–æ–ª—å–∑—É–µ—Ç Microsoft Presidio –∏ Spacy (–º–æ–¥–µ–ª—å `ru_core_news_lg`) –¥–ª—è –ø–æ–∏—Å–∫–∞ –∏ –∑–∞–º–µ–Ω—ã —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏.

–ü—Ä–æ–µ–∫—Ç –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –¥–≤–∞ —Ä–µ–∂–∏–º–∞ —Ä–∞–±–æ—Ç—ã:

1.  **MCP Server** (–¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Å Claude Desktop, Cursor –∏–ª–∏ IIDE).
2.  **HTTP API Server** (–¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å n8n, Zapier –∏–ª–∏ –≤–∞—à–∏–º —Å–∞–π—Ç–æ–º).

---

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç (Docker) - –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –¥–ª—è API

–°–∞–º—ã–π –ø—Ä–æ—Å—Ç–æ–π —Å–ø–æ—Å–æ–± –∑–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–µ—Ä –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å –≤–Ω–µ—à–Ω–∏–º–∏ —Å–µ—Ä–≤–∏—Å–∞–º–∏ (n8n, —Å–∞–π—Ç—ã).

### 1. –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞

–°–∫–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –∏ –ø–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –ø–∞–ø–∫—É –ø—Ä–æ–µ–∫—Ç–∞:

```bash
git clone https://github.com/Pioneer113-new/mcp-pd-RF.git
cd mcp-pd-RF
```

### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ API –∫–ª—é—á–µ–π

–°–µ—Ä–≤–µ—Ä –∏—Å–ø–æ–ª—å–∑—É–µ—Ç API –∫–ª—é—á–∏ –¥–ª—è –∑–∞—â–∏—Ç—ã –¥–æ—Å—Ç—É–ø–∞.

1.  –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –ø—Ä–∏–º–µ—Ä —Ñ–∞–π–ª–∞ –∫–ª—é—á–µ–π:
    ```bash
    cp api_keys.example.json api_keys.json
    ```
2.  –û—Ç–∫—Ä–æ–π—Ç–µ `api_keys.json` –∏ –∑–∞–¥–∞–π—Ç–µ —Å–≤–æ–∏ –∫–ª—é—á–∏:
    ```json
    {
      "keys": {
        "MY_SECRET_KEY_123": {
          "user": "MyService",
          "limit": 1000,
          "role": "admin"
        }
      }
    }
    ```

### 3. –ó–∞–ø—É—Å–∫

```bash
docker-compose up --build -d
```

–°–µ—Ä–≤–µ—Ä –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ –∞–¥—Ä–µ—Å—É: `http://localhost:8005` (–∏–ª–∏ IP –≤–∞—à–µ–≥–æ VPS).

### 4. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã

–í—ã–ø–æ–ª–Ω–∏—Ç–µ –∑–∞–ø—Ä–æ—Å (–∑–∞–º–µ–Ω–∏—Ç–µ `MY_SECRET_KEY_123` –Ω–∞ –≤–∞—à –∫–ª—é—á):

```bash
curl -X POST "http://localhost:8005/anonymize" \
     -H "Content-Type: application/json" \
     -H "X-API-Key: MY_SECRET_KEY_123" \
     -d '{ "text": "–ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤, –ø–∞—Å–ø–æ—Ä—Ç 4500 123456" }'
```

**–û—Ç–≤–µ—Ç:**

```json
{
  "anonymized_text": "<PERSON>, –ø–∞—Å–ø–æ—Ä—Ç <PASSPORT_RF>"
}
```

---

## üõ† –õ–æ–∫–∞–ª—å–Ω–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞ (MCP Mode)

–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —ç—Ç–æ—Ç —Ä–µ–∂–∏–º, –µ—Å–ª–∏ —Ö–æ—Ç–∏—Ç–µ –ø–æ–¥–∫–ª—é—á–∏—Ç—å —Å–µ—Ä–≤–µ—Ä –∫ IDE (Cursor, VS Code) –∏–ª–∏ Claude Desktop –ª–æ–∫–∞–ª—å–Ω–æ –∏–ª–∏ —á–µ—Ä–µ–∑ SSH.

### –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Python 3.10+
- `pip`

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞

1.  –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–∫—Ä–∏–ø—Ç —É—Å—Ç–∞–Ω–æ–≤–∫–∏:

    ```bash
    ./install.sh
    ```

    –°–∫—Ä–∏–ø—Ç —Å–æ–∑–¥–∞—Å—Ç –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ (`venv`) –∏ —Å–∫–∞—á–∞–µ—Ç –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ ML –º–æ–¥–µ–ª–∏.

2.  –ê–∫—Ç–∏–≤–∏—Ä—É–π—Ç–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ:
    ```bash
    source venv/bin/activate
    ```

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

**–ó–∞–ø—É—Å–∫ –≤—Ä—É—á–Ω—É—é:**

```bash
mcp run main.py
```

**–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —á–µ—Ä–µ–∑ MCP Inspector (SSH):**

```bash
npx -y @modelcontextprotocol/inspector ssh user@your_vps_ip "cd /path/to/project && source venv/bin/activate && python main.py"
```

---

## üìö –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –∏ —Ñ–æ—Ä–º–∞—Ç—ã

### –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Å—É—â–Ω–æ—Å—Ç–∏ (25+ –∫–∞—Ç–µ–≥–æ—Ä–∏–π)

| –ö–∞—Ç–µ–≥–æ—Ä–∏—è         | –ü—Ä–∏–º–µ—Ä                            | –ó–∞–º–µ–Ω–∞                                           |
| :---------------- | :-------------------------------- | :----------------------------------------------- |
| **–î–æ–∫—É–º–µ–Ω—Ç—ã –†–§**  | –ü–∞—Å–ø–æ—Ä—Ç –†–§, –°–ù–ò–õ–°, –ò–ù–ù, –û–ú–°       | `<PASSPORT_RF>`, `<SNILS>`, `<INN>`              |
| **–ö–æ–Ω—Ç–∞–∫—Ç—ã**      | –§–ò–û, –¢–µ–ª–µ—Ñ–æ–Ω—ã, Email, Telegram ID | `<PERSON>`, `<PHONE>`, `<EMAIL>`, `<TG_CHAT_ID>` |
| **–§–∏–Ω–∞–Ω—Å—ã**       | –ö–∞—Ä—Ç—ã, –°—á–µ—Ç–∞, –ö—Ä–∏–ø—Ç–æ–∫–æ—à–µ–ª—å–∫–∏      | `<BANK_CARD>`, `<BANK_ACCOUNT>`, `<WALLET>`      |
| **–¶–∏—Ñ—Ä–æ–≤–æ–π —Å–ª–µ–¥** | IP, MAC, IMEI                     | `<IP>`, `<MAC>`, `<IMEI>`                        |
| **–ì–µ–æ –∏ –í—Ä–µ–º—è**   | –ê–¥—Ä–µ—Å–∞, –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã, –î–∞—Ç—ã          | `<LOC>`, `<GEO>`, `<DATE>`                       |

### API –≠–Ω–¥–ø–æ–∏–Ω—Ç—ã (HTTP API Mode)

–ü–æ—Ä—Ç –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: **8005**
Auth Header: `X-API-Key: <YOUR_KEY>`

1.  **POST `/anonymize`**
    - **Body**: `{ "text": "Raw text..." }`
    - **Response**: `{ "anonymized_text": "Anonymized text..." }`
    - **–û–ø–∏—Å–∞–Ω–∏–µ**: –ü–æ–ª–Ω–∞—è –∑–∞–º–µ–Ω–∞ —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö.

2.  **POST `/audit`**
    - **Body**: `{ "text": "Raw text..." }`
    - **Response**: `{ "entities": [...] }`
    - **–û–ø–∏—Å–∞–Ω–∏–µ**: –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –Ω–∞–π–¥–µ–Ω–Ω—ã—Ö —Å—É—â–Ω–æ—Å—Ç–µ–π –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ç–µ–∫—Å—Ç–∞ (–±–µ–∑–æ–ø–∞—Å–Ω–æ –¥–ª—è –ª–æ–≥–æ–≤).

3.  **GET `/health`**
    - **Response**: `{ "status": "ok" }`

---

## üõ° –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- **–ò–∑–æ–ª—è—Ü–∏—è**: –í Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ —Å–µ—Ä–≤–µ—Ä —Ä–∞–±–æ—Ç–∞–µ—Ç –æ—Ç –Ω–µ–ø—Ä–∏–≤–∏–ª–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (`1000:1000`).
- **ReadOnly**: –§–∞–π–ª–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –¥–æ—Å—Ç—É–ø–Ω–∞ —Ç–æ–ª—å–∫–æ –¥–ª—è —á—Ç–µ–Ω–∏—è.
- **–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è**: –î–æ—Å—Ç—É–ø –∫ API —Å—Ç—Ä–æ–≥–æ –ø–æ –∫–ª—é—á–∞–º –∏–∑ `api_keys.json`.
- **–õ–∏–º–∏—Ç—ã**: –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º–æ–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –∑–∞–ø—Ä–æ—Å–æ–≤ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∫–ª—é—á–∞.

## –õ–∏—Ü–µ–Ω–∑–∏—è

MIT License
